---
title: Policy and Level
date: 2023-08-26 11:10:00 +/-0
categories: [clean_architecture]
tags: [clean_architecture.clean_architecture-chp19] # TAG names should always be lowercase
---

Business Rule은 하나의 큰 Policy를 서술하는 작은 Policy들로 쪼개질 수 있다.  
아키텍처를 개발할 때는 이러한 Policy를 신중하고 분리하고, Policy가 변경되는 양상에 따라 이를 재편성하는 일도 포함된다.  
동일한 이유로 동일한 시점에 변경되는 policy들은 동일한 수준 및 컴포넌트에 위치하고 다른 이유로 다른 시점에 변경되는 policy는 다른 수준에 다른 컴포넌트로 위치해야 한다.

아키텍처를 개발할 때 컴포넌트들을 DAG로 구성하는 기술을 포함한다.  
그래프에서 node는 동일한 수준의 policy를 포함하는 컴포넌트, edge는 의존성 방향을 의미한다.  
이러한 의존성은 소스 코드, 컴파일 타임의 의존성이다. Java에서는 import, C에서는 include에 해당한다.  
이러한 의존성 방향은 항상 **저수준 컴포넌트에서 고수준 컴포넌트를 향하도록** 한다.

# 수준

수준(Level)은 엄밀하게 정의하면 "입출력로부터의 거리"다.  
시스템에서 입출력과 멀리 위치할 수록 고수준이 되고 입출력을 다루는 컴포넌트는 최하위 수준이 된다.

고수준의 컴포넌트에서 Boundary Interface를 가지고 있고 저수준에서는 이를 구현한 다음 고수준의 컴포넌트에서 Interface 대신 사용되는 방식을 통해 의존성 방향을 유지할 수 있다.

정책을 컴포넌트로 묶는 기준은 SRP와 CCP에 따른다는 것을 명심한다. 즉 고수준 정책은 저수준 정책에 비해 덜 변경되고 보다 중요한 이유로 변경된다.

# 결론

정책을 컴포넌트로 묶는 기준 설정과 이들을 수준에 따라 위치하고 의존성 방향을 저수준에서 고수준으로 향하도록 하기 위해 사용된 원칙들은 다음과 같다.

- SRP(단일 책임 원칙)
- OCP(개방 폐쇄 원칙)
- CCP(공통 폐쇄 원칙)
- DIP(의존성 역전 원칙)
- SDP(안정된 의존성 원칙)
- SAP(안정된 추상화 원칙)
