---
title: Screaming Architecture
date: 2023-08-26 14:10:00 +/-0
categories: [clean_architecture]
tags: [clean_architecture.clean_architecture-chp21] # TAG names should always be lowercase
---

아키텍처를 딱 봤을 때 framework가 떠오르는 형태가 아닌 시스템의 목적이 보이도록 설계해야 한다.

# 아키텍처의 테마

주택이나 도서관의 아키텍처가 해당 건축물의 UseCase에 대해 소리치는 것처럼 소프트웨어 시스템의 아키텍처도 UseCase에 대해 소리쳐야 한다.  
즉 아키텍처는 UseCase를 지원하는 구조이며, 프레임워크로부터 제공받아서는 절대 안 된다.

# 아키텍처의 목적

좋은 아키텍처는 UseCase에 중점을 두고 지엽적인 관심사(Rails, Java Spring, NestJS, MySQL)에 대한 결합을 분리시켜 이에 대한 결정을 나중으로 미룰 수 있고 또 쉽게 번복할 수 있게 한다.

# 하지만 웹은?

웹은 전달 메커니즘(입출력 장치)이며, 따라서 아키텍처에서 미뤄야할 결정 사항 중 하나이다.  
따라서 근본적인 아키텍처를 뜯어고치지 않더라도 시스템을 콘솔 앱, 웹 앱, 리치 클라이언트 앱 심지어 웹 서비스 앱으로도 전달할 수 있어야 한다.

# 프레임워크는 도구일뿐, 삶의 방식이 아니다

프레임워크가 모든 것을 하게 하자라는 태도 대신 비판적으로 보자.  
프레임워크로 인해 드는 비용, 어떻게 사용할지, 사용하지 않을려면 어떻게 해야할지를 묻는 것이다.  
그리고 어떻게 하면 아키텍처를 UseCase에 중점을 둔 채 그대로 보존할 수 있을지를 생각한다.  
즉 프레임워크가 아키텍처의 중심을 차지하는 일을 막을 수 있는 전략을 개발한다.

# 테스트하기 쉬운 아키텍처

아키텍처가 UseCase를 최우선으로 한다면 프레임워크 없이도 단위 테스를 할 수 있어야 한다.  
웹 서버가 있어야, DB가 반드시 연결되야 테스트를 돌릴 수 있어서는 안 된다.

Entity는 간단한 객체여야하며, UseCase 객체가 이를 조작하는 형태로 프레임워크로 인한 어려움을 겪지 않고도 반드시 이 모두를 있는 그대로 테스트할 수 있어야 한다.

# 결론

시스템을 봤을 때 모든 UseCase를 이해할 수 있어야하며 이를 본 사람들이 이러한 말을 해야한다.  
"모델처럼 보이는 건 확인했습니다. 근데 View와 Controller는 어디에 있죠?"  
그러면 멋있게 "아, 그것은 세부사항이라서 당장은 고려할 필요가 없습니다. 나중에 결정할 겁니다."라고 한다.
