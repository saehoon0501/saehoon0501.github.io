---
title: Frameworks Are Details
date: 2023-08-28 17:00:00 +/-0
categories: [clean_architecture]
tags: [clean_architecture.clean_architecture-chp32] # TAG names should always be lowercase
---

# 프레임워크 제작자

프레임워크 제작자는 자신이 해결해야 할 고유한 문제나 자신의 동료와 친구들의 문제를 알고 이것들을 해결하기 위해 프레임워크를 만든다.  
우리의 문제는 프레임워크가 풀려는 문제와 꽤 많이 겹칠 것이고 겹치는 영역이 크면 클수록 프레임워크는 실제로 더 유용해진다.

# 혼인 관계의 비대칭성

프레임워크 제작자와 이용자들 사이의 관계는 비대칭적이다.

만약 우리가 프레임워크를 중심에 두고 아키텍처는 그 바깥을 감싸게 둔다고 가정해보자.  
프레임워크의 기반 클래스로부터 파생하는 방식으로, 그래서 프레임워크와 절대로 분리할 수 없는 방식으로 쓰기에 한번 결합하면 그 관계를 깨기 매우 어려운 혼인과 같다. 이는 프레임워크에 대해 장기간에 걸친 막대한 헌신을 요청하는 것이다.

모든 위험과 부담은 우리가 감수할 수 있는 이 일방적인 혼인 관계를 피해야 한다.

# 위험 요인

프레임워크 사용 시 고려해야 할 위험 요인들은 다음과 같다.

- 프레임워크 제작자는 우리만의 고유한 Entity를 만들 때 제작자의 코드를 상속할 것을 요구한다. 즉, 자신의 프레임워크가 우리 시스템의 가장 안쪽 원과 결합되기를 원한다. 이렇게 프레임워크가 한번 안으로 들어오면 다시는 원 밖으로 나오지 않을 것이다.
- 프레임워크는 app의 초기 기능을 만드는 데는 도움이 될 것이지만 시간이 지나면서 app이 성숙해지면 프레임워크가 제공하는 기능과 틀을 벗어나게 될 것이다. 만약 결혼반지를 꼈다면 시간이 지나면서 프레임워크와 계속 싸우고 있는 자신을 발견할 것이다.
- 프레임워크는 우리가 원하지 않는 방향으로 진화할 수 있다. 필요없는 기능을 업그레이드하느라 다른 일을 못할 수도 있고 사용 중이던 기능이 사라지거나 반영하기 힘든 형태로 변경될 수도 있다.
- 새롭고 더 나은 프레임워크가 등장해서 갈아타고 싶을 수도 있다.

# 해결책

**프레임 워크와 결혼하지 말라**

Entity를 만들 때 프레임워크가 자신의 기반 클래스로부터 파생하기를 요구한다면, 대신 proxy를 만들고 업무 규칙에 plugin할 수 있는 컴포넌트에 이들 proxy를 위치시키자.

핵심 코드에 plugin할 수 있는 컴포넌트에 프레임워크를 결합하고 의존성 규칙을 준수한다.

만약 Spring을 통해 DI framework를 사용한다고 하면 Main 컴포넌트에서 Spring을 사용해서 의존성을 주입시키자.  
Main은 아키텍처 내에서 가장 지저분한, 최저 수준의 컴포넌트이기 때문에 framework를 알아도 상관없다.

# 이제 선언합니다

Java를 사용할 때 표준 라이브러리와 같은 경우 혼인 관계를 피할 수 없다.  
이러한 관계는 정상이지만 선택적이여야 한다. app이 프레임워크와 한번 결합하면 이제 이 app은 평생 프레임워크를 사용해야 할 것이다.

# 결론

프레임워크를 선택하기 전에 이에 대해 정확히 알아보는 과정을 거치고 가급적이면 프레임워크를 가능한 오랫동안 아키텍처 경계 너머에 두자.
